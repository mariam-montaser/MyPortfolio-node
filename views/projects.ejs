<%- include('./partials/header.ejs')%>
<%- include('./partials/navbar.ejs')%>

<div class="container">
    <h1 class="text-center my-3">My Projects</h1>
    <a class="btn btn-warning mb-2" href="/projects/add">+Add New Project</a>
    <% if(projects.length > 0) {%>
    <table class="table table-striped table-responsive d-block mx-auto mt-3">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Image</th>
                <th scope="col">Project Name</th>
                <th scope="col">Project Link</th>
                <th scope="col">Github Link</th>
                <th scope="col">Controls</th>
            </tr>
        </thead>
        <tbody>
            <% projects.forEach((project, index) => {%>
            <tr>
                <th scope="row"><%= index+1%></th>
                <td>
                    <img class="img-thumbnail" src="<%= project.imagePath %>" alt="project img">
                </td>
                <td><%= project.projectName %></td>
                <td>
                    <a href="<%= project.projectLink %>" target="_blank">Project Link</a>
                </td>
                <td>
                    <a href="<%= project.githubLink %>" target="_blank">Github Repository</a>
                </td>
                <td>
                    <a class="btn btn-success" href="/projects/edit/<%= project._id %>">Edit</a>
                    <form class="d-inline-block" action="/projects/delete/<%= project._id %>?_method=DELETE" method="post">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                </td>
            </tr>
            <% })%>
        </tbody>
    </table>
<% } else { %>
    <p class="text-center alert alert-success">No Projects Yet.</p>
<% } %>
</div>


<%- include('./partials/footer.ejs')%>